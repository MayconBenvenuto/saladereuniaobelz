(()=>{"use strict";var e={150:(e,a,t)=>{var s=t(950),n=t(352),o=t(555),i=t(414);const r=()=>{const[e,a]=(0,s.useState)(new Date),[t,n]=(0,s.useState)(null),[r,l]=(0,s.useState)(!1),[c,d]=(0,s.useState)(null),[m,u]=(0,s.useState)(!1),[p,h]=(0,s.useState)(null),[x,j]=(0,s.useState)(null),[g,v]=(0,s.useState)({name:"",title:"",participants:"",start_time:"",end_time:""}),b=e=>e.toISOString().split("T")[0],f=e=>e.slice(0,5),N=e=>{h(e),setTimeout((()=>h(null)),5e3)},y=e=>{j(e),setTimeout((()=>j(null)),3e3)},A=(0,s.useCallback)((async()=>{try{const e="".concat("","/api/test");console.log("Testando API em:",e);const a=await fetch(e),t=await a.json();console.log("Teste da API:",t),y("API est\xe1 funcionando!")}catch(p){console.error("Erro no teste da API:",p),N("Erro no teste da API: ".concat(p.message))}}),[]),k=(0,s.useCallback)((async()=>{u(!0),h(null);try{const a=b(e),t="".concat("","/api/availability/").concat(a);console.log("NODE_ENV:","production"),console.log("API_BASE_URL:",""),console.log("Fazendo requisi\xe7\xe3o para:",t);const s=await fetch(t,{method:"GET",headers:{"Content-Type":"application/json"}});if(console.log("Response status:",s.status),console.log("Response ok:",s.ok),!s.ok){const e=await s.text();throw console.error("Response error text:",e),new Error("HTTP ".concat(s.status,": ").concat(s.statusText))}const o=await s.json();console.log("Data recebida:",o),console.log("Tipo de data:",typeof o,Array.isArray(o)),n(o)}catch(p){console.error("Error loading availability:",p),console.error("Error stack:",p.stack),"TypeError"===p.name&&p.message.includes("fetch")?N("Erro de conex\xe3o com o servidor. Verifique se o servi\xe7o est\xe1 funcionando."):N("Erro ao carregar disponibilidade: ".concat(p.message))}finally{u(!1)}}),[e]);(0,s.useEffect)((()=>{k()}),[k]);const C=(0,s.useCallback)((t=>{const s=new Date(e);s.setDate(e.getDate()+t),a(s)}),[e]),w=(0,s.useCallback)((e=>{e.available&&(d(e),v((0,o.A)((0,o.A)({},g),{},{start_time:e.start_time.slice(0,5),end_time:e.end_time.slice(0,5)})),l(!0))}),[g]),_=(0,s.useCallback)((async a=>{if(a.preventDefault(),g.name.trim()?g.title.trim()?g.start_time?g.end_time?!(g.start_time>=g.end_time)||(N("Hor\xe1rio de fim deve ser posterior ao hor\xe1rio de in\xedcio"),0):(N("Hor\xe1rio de fim \xe9 obrigat\xf3rio"),0):(N("Hor\xe1rio de in\xedcio \xe9 obrigat\xf3rio"),0):(N("T\xedtulo da reuni\xe3o \xe9 obrigat\xf3rio"),0):(N("Nome \xe9 obrigat\xf3rio"),0)){u(!0),h(null);try{const a={name:g.name.trim(),date:b(e),start_time:g.start_time,end_time:g.end_time,title:g.title.trim(),description:g.participants.trim()||null,participants:g.participants.trim()||null},t=await fetch("".concat("","/api/appointments"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!t.ok){const e=await t.json();throw new Error(e.error||"HTTP ".concat(t.status,": ").concat(t.statusText))}y("Agendamento realizado com sucesso!"),l(!1),v({name:"",title:"",participants:"",start_time:"",end_time:""}),k()}catch(p){console.error("Error booking appointment:",p),N("Erro ao agendar: ".concat(p.message))}finally{u(!1)}}}),[g,e,k]);return(0,i.jsxs)("div",{className:"app",children:[p&&(0,i.jsxs)("div",{className:"notification error",children:[(0,i.jsxs)("span",{children:["\u274c ",p]}),(0,i.jsx)("button",{onClick:()=>h(null),children:"\xd7"})]}),x&&(0,i.jsxs)("div",{className:"notification success",children:[(0,i.jsxs)("span",{children:["\u2705 ",x]}),(0,i.jsx)("button",{onClick:()=>j(null),children:"\xd7"})]}),(0,i.jsx)("header",{className:"header",children:(0,i.jsxs)("div",{className:"header-content",children:[(0,i.jsxs)("div",{className:"logo-container",children:[(0,i.jsx)("img",{src:"logo-belz.png",alt:"Belz Corretora de Seguros",className:"logo"}),(0,i.jsx)("h1",{children:"Belz Corretora de Seguros"})]}),(0,i.jsxs)("div",{className:"room-image-container",children:[(0,i.jsx)("img",{src:"https://images.unsplash.com/photo-1517502884422-41eaead166d4?crop=entropy&cs=srgb&fm=jpg&ixid=M3w3NDk1Nzh8MHwxfHNlYXJjaHwyfHxjb25mZXJlbmNlJTIwcm9vbXxlbnwwfHx8fDE3NTI1MTU3NjZ8MA&ixlib=rb-4.1.0&q=85",alt:"Sala de Reuni\xe3o",className:"room-image"}),(0,i.jsxs)("div",{className:"room-overlay",children:[(0,i.jsx)("h2",{children:"Sala de Reuni\xe3o"}),(0,i.jsx)("p",{children:"Agendamento de Reuni\xf5es"})]})]})]})}),(0,i.jsxs)("main",{className:"main-content",children:[(0,i.jsxs)("div",{className:"date-navigation",children:[(0,i.jsx)("button",{className:"nav-button",onClick:()=>C(-1),disabled:m,children:"\u2190"}),(0,i.jsx)("h2",{className:"current-date",children:(T=e,T.toLocaleDateString("pt-BR",{weekday:"long",year:"numeric",month:"long",day:"numeric"}))}),(0,i.jsx)("button",{className:"nav-button",onClick:()=>C(1),disabled:m,children:"\u2192"}),(0,i.jsx)("button",{className:"nav-button",onClick:A,style:{marginLeft:"10px",backgroundColor:"#007bff",color:"white"},children:"Testar API"})]}),(0,i.jsx)("div",{className:"calendar-container",children:m?(0,i.jsxs)("div",{className:"loading",children:[(0,i.jsx)("div",{className:"spinner"}),"Carregando..."]}):(()=>{let e=[];return t&&Array.isArray(t.slots)?e=t.slots:Array.isArray(t)&&(e=t),Array.isArray(e)&&e.length>0?(0,i.jsx)("div",{className:"time-slots",children:e.map(((e,a)=>((e,a)=>{const t=e.available,s=t?"time-slot available":"time-slot occupied";return(0,i.jsxs)("div",{className:s,onClick:()=>w(e),title:t?"Clique para agendar":"".concat(e.appointment.title," - ").concat(e.appointment.name),children:[(0,i.jsxs)("div",{className:"time-range",children:[f(e.start_time)," - ",f(e.end_time)]}),!t&&(0,i.jsxs)("div",{className:"appointment-info",children:[(0,i.jsx)("div",{className:"appointment-title",children:e.appointment.title}),(0,i.jsx)("div",{className:"appointment-name",children:e.appointment.name})]})]},a)})(e,a)))}):(0,i.jsxs)("div",{className:"no-data",children:[(0,i.jsx)("p",{children:"Nenhum hor\xe1rio dispon\xedvel para este dia"}),(0,i.jsx)("p",{children:"Por favor, verifique se o banco de dados est\xe1 configurado corretamente."})]})})()}),(0,i.jsx)("div",{className:"floating-action-button-container",children:(0,i.jsxs)("button",{className:"floating-action-button",onClick:()=>l(!0),disabled:m,children:[(0,i.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,i.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,i.jsx)("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),(0,i.jsx)("line",{x1:"8",y1:"12",x2:"16",y2:"12"})]}),"Agendar Reuni\xe3o"]})})]}),r&&(0,i.jsx)("div",{className:"modal-overlay",children:(0,i.jsxs)("div",{className:"modal-content",children:[(0,i.jsxs)("div",{className:"modal-header",children:[(0,i.jsx)("h3",{children:"Agendar Reuni\xe3o"}),(0,i.jsx)("button",{className:"close-button",onClick:()=>l(!1),disabled:m,children:"\xd7"})]}),(0,i.jsxs)("form",{onSubmit:_,className:"booking-form",children:[(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"Nome e Sobrenome *"}),(0,i.jsx)("input",{type:"text",value:g.name,onChange:e=>v((0,o.A)((0,o.A)({},g),{},{name:e.target.value})),placeholder:"Digite seu nome completo",required:!0,disabled:m})]}),(0,i.jsx)("div",{className:"form-row",children:(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"Data"}),(0,i.jsx)("input",{type:"date",value:b(e),onChange:e=>{a(new Date(e.target.value+"T00:00:00"))},disabled:m})]})}),(0,i.jsxs)("div",{className:"form-row",children:[(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"Hor\xe1rio de In\xedcio *"}),(0,i.jsx)("input",{type:"time",value:g.start_time,onChange:e=>v((0,o.A)((0,o.A)({},g),{},{start_time:e.target.value})),required:!0,disabled:m})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"Hor\xe1rio de Fim *"}),(0,i.jsx)("input",{type:"time",value:g.end_time,onChange:e=>v((0,o.A)((0,o.A)({},g),{},{end_time:e.target.value})),required:!0,disabled:m})]})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"T\xedtulo da Reuni\xe3o *"}),(0,i.jsx)("input",{type:"text",value:g.title,onChange:e=>v((0,o.A)((0,o.A)({},g),{},{title:e.target.value})),placeholder:"Ex: Reuni\xe3o de Vendas",required:!0,disabled:m})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{children:"Participantes (opcional)"}),(0,i.jsx)("textarea",{value:g.participants,onChange:e=>v((0,o.A)((0,o.A)({},g),{},{participants:e.target.value})),placeholder:"Liste os participantes da reuni\xe3o",rows:"3",disabled:m})]}),(0,i.jsxs)("div",{className:"form-actions",children:[(0,i.jsx)("button",{type:"button",className:"cancel-button",onClick:()=>l(!1),disabled:m,children:"Cancelar"}),(0,i.jsx)("button",{type:"submit",className:"submit-button",disabled:m,children:m?"Agendando...":"Confirmar Agendamento"})]})]})]})})]});var T};n.createRoot(document.getElementById("root")).render((0,i.jsx)(s.StrictMode,{children:(0,i.jsx)(r,{})}))}},a={};function t(s){var n=a[s];if(void 0!==n)return n.exports;var o=a[s]={exports:{}};return e[s](o,o.exports,t),o.exports}t.m=e,(()=>{var e=[];t.O=(a,s,n,o)=>{if(!s){var i=1/0;for(d=0;d<e.length;d++){s=e[d][0],n=e[d][1],o=e[d][2];for(var r=!0,l=0;l<s.length;l++)(!1&o||i>=o)&&Object.keys(t.O).every((e=>t.O[e](s[l])))?s.splice(l--,1):(r=!1,o<i&&(i=o));if(r){e.splice(d--,1);var c=n();void 0!==c&&(a=c)}}return a}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[s,n,o]}})(),t.d=(e,a)=>{for(var s in a)t.o(a,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:a[s]})},t.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),(()=>{var e={792:0};t.O.j=a=>0===e[a];var a=(a,s)=>{var n,o,i=s[0],r=s[1],l=s[2],c=0;if(i.some((a=>0!==e[a]))){for(n in r)t.o(r,n)&&(t.m[n]=r[n]);if(l)var d=l(t)}for(a&&a(s);c<i.length;c++)o=i[c],t.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return t.O(d)},s=self.webpackChunkfrontend=self.webpackChunkfrontend||[];s.forEach(a.bind(null,0)),s.push=a.bind(null,s.push.bind(s))})();var s=t.O(void 0,[103],(()=>t(150)));s=t.O(s)})();