(()=>{"use strict";var e={625:(e,t,a)=>{var n=a(950),r=a(352),i=a(555);const o={API_BASE_URL:"",API_TIMEOUT:8e3,API_RETRY_TIMEOUT:12e3,CACHE_DURATION:3e5,CACHE_DURATION_OFFLINE:18e5,MAX_RETRIES:2,RETRY_DELAY:500,DEBUG:!1},s=function(){if(o.DEBUG){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];console.log("[DEBUG]",...t)}},l=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];console.error("[ERROR]",...t)},c=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];console.warn("[WARN]",...t)};class d{constructor(){this.isOnline=navigator.onLine,this.retryCount=0,this.maxRetries=5,this.retryDelay=1e3,this.callbacks={online:[],offline:[],error:[]},this.init()}init(){window.addEventListener("online",this.handleOnline.bind(this)),window.addEventListener("offline",this.handleOffline.bind(this)),this.startHealthCheck()}handleOnline(){this.isOnline=!0,this.retryCount=0,s("Conex\xe3o reestabelecida"),this.notify("online")}handleOffline(){this.isOnline=!1,c("Conex\xe3o perdida"),this.notify("offline")}async healthCheck(){try{const e=await fetch("".concat(o.API_BASE_URL,"/api/health"),{method:"GET",cache:"no-cache",signal:AbortSignal.timeout(5e3)});if(e.ok)return this.isOnline||this.handleOnline(),!0;throw new Error("Health check failed: ".concat(e.status))}catch(e){return l("Health check error:",e),this.isOnline&&this.handleOffline(),!1}}startHealthCheck(){setInterval((()=>{this.isOnline&&this.healthCheck()}),3e4)}async retryOperation(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.maxRetries;for(let n=0;n<t;n++)try{const t=await e();return this.retryCount=0,t}catch(a){if(this.retryCount++,c("Tentativa ".concat(n+1,"/").concat(t," falhou:"),a.message),n===t-1)throw this.notify("error",a),a;const e=this.retryDelay*Math.pow(2,n);await new Promise((t=>setTimeout(t,e)))}}on(e,t){this.callbacks[e]&&this.callbacks[e].push(t)}off(e,t){if(this.callbacks[e]){const a=this.callbacks[e].indexOf(t);a>-1&&this.callbacks[e].splice(a,1)}}notify(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.callbacks[e]&&this.callbacks[e].forEach((e=>e(t)))}getStatus(){return{isOnline:this.isOnline,retryCount:this.retryCount,maxRetries:this.maxRetries}}}const m=new d;var h=a(414);const u=()=>navigator.onLine,p="meeting_room_cache",g=e=>{const[t,a]=e.split(":").map(Number);return 60*t+a},f=e=>{let{isOpen:t,onClose:a,selectedSlot:r,onConfirm:o}=e;const[s,l]=(0,n.useState)({name:"",title:"",participants:"",start_time:"",end_time:""});(0,n.useEffect)((()=>{r&&t&&l((e=>(0,i.A)((0,i.A)({},e),{},{start_time:r.start_time,end_time:r.end_time})))}),[r,t]);return t&&r?(0,h.jsx)("div",{className:"modal-overlay",children:(0,h.jsxs)("div",{className:"modal-content",children:[(0,h.jsxs)("div",{className:"modal-header",children:[(0,h.jsx)("h3",{children:"Agendar Reuni\xe3o"}),(0,h.jsx)("button",{className:"close-button",onClick:a,children:"\xd7"})]}),(0,h.jsxs)("div",{className:"booking-form",children:[(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{children:"Hor\xe1rio Selecionado"}),(0,h.jsxs)("div",{style:{padding:"0.8rem",background:"#e8f5e8",borderRadius:"8px",fontWeight:"600",color:"#2d5a3d"},children:[r.start_time," - ",r.end_time]})]}),(0,h.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s.name.trim()?s.title.trim()?s.start_time&&s.end_time?s.start_time>=s.end_time?alert("Hor\xe1rio de fim deve ser posterior ao hor\xe1rio de in\xedcio"):o({name:s.name.trim(),title:s.title.trim(),participants:s.participants.trim(),start_time:s.start_time,end_time:s.end_time}):alert("Hor\xe1rios s\xe3o obrigat\xf3rios"):alert("T\xedtulo da reuni\xe3o \xe9 obrigat\xf3rio"):alert("Nome \xe9 obrigat\xf3rio")},children:[(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{children:"Nome do Respons\xe1vel *"}),(0,h.jsx)("input",{type:"text",value:s.name,onChange:e=>l((t=>(0,i.A)((0,i.A)({},t),{},{name:e.target.value}))),required:!0,placeholder:"Digite seu nome"})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{children:"T\xedtulo da Reuni\xe3o *"}),(0,h.jsx)("input",{type:"text",value:s.title,onChange:e=>l((t=>(0,i.A)((0,i.A)({},t),{},{title:e.target.value}))),required:!0,placeholder:"Ex: Reuni\xe3o de Vendas"})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{children:"Participantes"}),(0,h.jsx)("textarea",{value:s.participants,onChange:e=>l((t=>(0,i.A)((0,i.A)({},t),{},{participants:e.target.value}))),placeholder:"Lista de participantes (opcional)",rows:"3"})]}),(0,h.jsxs)("div",{className:"form-row",children:[(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{children:"Hor\xe1rio de In\xedcio *"}),(0,h.jsx)("input",{type:"time",value:s.start_time,onChange:e=>l((t=>(0,i.A)((0,i.A)({},t),{},{start_time:e.target.value}))),required:!0})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{children:"Hor\xe1rio de T\xe9rmino *"}),(0,h.jsx)("input",{type:"time",value:s.end_time,onChange:e=>l((t=>(0,i.A)((0,i.A)({},t),{},{end_time:e.target.value}))),required:!0})]})]}),(0,h.jsxs)("div",{className:"form-actions",children:[(0,h.jsx)("button",{type:"button",onClick:a,className:"cancel-button",children:"Cancelar"}),(0,h.jsx)("button",{type:"submit",className:"submit-button",children:"Confirmar Agendamento"})]})]})]})]})}):null},v=()=>{const[e,t]=(0,n.useState)(new Date),[a,r]=(0,n.useState)([]),[d,v]=(0,n.useState)(!1),[x,j]=(0,n.useState)(null),[y,b]=(0,n.useState)(null),{loading:_,error:E,request:A,setError:N}=(()=>{const[e,t]=(0,n.useState)(!1),[a,r]=(0,n.useState)(null),[d,h]=(0,n.useState)("online");(0,n.useEffect)((()=>{const e=()=>{h("online"),r(null)},t=()=>{h("offline"),r("Sem conex\xe3o com a internet")},a=e=>{h("error"),r((null===e||void 0===e?void 0:e.message)||"Erro de conex\xe3o")};return m.on("online",e),m.on("offline",t),m.on("error",a),()=>{m.off("online",e),m.off("offline",t),m.off("error",a)}}),[]);const u=(0,n.useCallback)((async function(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.MAX_RETRIES;for(let d=0;d<l;d++)try{const a=o.API_TIMEOUT+d*(o.API_RETRY_TIMEOUT-o.API_TIMEOUT),c=new AbortController,m=setTimeout((()=>c.abort()),a);s("Fazendo requisi\xe7\xe3o para: ".concat(e," (tentativa ").concat(d+1,"/").concat(l,")"));const h=await fetch(e,(0,i.A)((0,i.A)({},n),{},{signal:c.signal,headers:(0,i.A)({"Content-Type":"application/json","Cache-Control":"no-cache",Pragma:"no-cache"},n.headers)}));if(clearTimeout(m),h.ok)return s("Sucesso na requisi\xe7\xe3o para: ".concat(e)),r(null),h;if(h.status>=400&&h.status<500)throw new Error("Erro ".concat(h.status,": ").concat(h.statusText));t=new Error("Erro ".concat(h.status,": ").concat(h.statusText))}catch(a){t=a,"AbortError"===a.name?c("Tentativa ".concat(d+1,"/").concat(l," - Timeout ap\xf3s ").concat(o.API_TIMEOUT+d*(o.API_RETRY_TIMEOUT-o.API_TIMEOUT),"ms")):c("Tentativa ".concat(d+1,"/").concat(l," - ").concat(a.message)),d<l-1&&await new Promise((e=>setTimeout(e,o.RETRY_DELAY*(d+1))))}throw t}),[]),p=(0,n.useCallback)((async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t(!0),r(null);try{const t=await u(e,n);return await t.json()}catch(a){throw l("Erro na requisi\xe7\xe3o:",a),r(a.message),a}finally{t(!1)}}),[u]);return{loading:e,error:a,request:p,fetchWithRetry:u,setError:r,setLoading:t,connectionStatus:d,isOnline:"online"===d}})(),S=e=>e.toISOString().split("T")[0],C=e=>{N(e)},T=(0,n.useMemo)((()=>function(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:18,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;const n=[];for(let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;r<t;r++)for(let t=0;t<60;t+=a){const i="".concat(String(r).padStart(2,"0"),":").concat(String(t).padStart(2,"0")),o=t+a;let s=r,l=o;o>=60&&(s++,l=o-60);const c="".concat(String(s).padStart(2,"0"),":").concat(String(l).padStart(2,"0")),d=e.find((e=>{const t=g(i),a=g(c),n=g(e.start_time),r=g(e.end_time);return t>=n&&t<r||a>n&&a<=r||t<=n&&a>=r}));n.push({start_time:i,end_time:c,available:!d,appointment:d||null})}return n}(a)),[a]),O=(0,n.useCallback)((async()=>{const t=S(e),a=(e=>{try{const t=localStorage.getItem("".concat(p,"_").concat(e));if(t){const{data:e,timestamp:a}=JSON.parse(t),n=u()?o.CACHE_DURATION:o.CACHE_DURATION_OFFLINE;if(Date.now()-a<n)return e}}catch(t){console.warn("Erro ao ler cache:",t)}return null})(t);if(a)return r(a),void s("Dados carregados do cache para:",t);try{s("Carregando agendamentos para: ".concat(t));const e=await A("".concat(o.API_BASE_URL,"/api/appointments?date=").concat(t),{method:"GET"});s("Dados recebidos para ".concat(t,":"),e);const a=Array.isArray(e)?e:[];r(a),((e,t)=>{try{localStorage.setItem("".concat(p,"_").concat(e),JSON.stringify({data:t,timestamp:Date.now()}))}catch(a){console.warn("Erro ao salvar cache:",a)}})(t,a)}catch(E){l("Erro ao carregar agendamentos:",E);const a=localStorage.getItem("".concat(p,"_").concat(t));if(a)try{const{data:e}=JSON.parse(a);r(e||[]),C("Usando dados em cache (pode estar desatualizado).")}catch(n){r([]),C("Erro de conex\xe3o. N\xe3o foi poss\xedvel carregar os dados.")}else r([]),C("Erro de conex\xe3o. Tente novamente.")}}),[e,A]);(0,n.useEffect)((()=>{O()}),[O]);const w=a=>{const n=new Date(e);n.setDate(n.getDate()+a),t(n)};return(0,h.jsxs)("div",{className:"app",children:[(0,h.jsx)("div",{className:"header",children:(0,h.jsxs)("div",{className:"header-content",children:[(0,h.jsxs)("div",{className:"logo-container",children:[(0,h.jsx)("img",{src:"/logo-belz.png",alt:"Belz Logo",className:"logo",onError:e=>{e.target.style.display="none"}}),(0,h.jsx)("h1",{children:"Sistema de Agendamento"})]}),(0,h.jsx)("div",{className:"room-image-container",children:(0,h.jsxs)("div",{className:"room-overlay",children:[(0,h.jsx)("h2",{children:"Sala de Reuni\xe3o"}),(0,h.jsx)("p",{children:"Agendamento inteligente com hor\xe1rios flex\xedveis"})]})})]})}),(0,h.jsxs)("div",{className:"main-content",children:[!u()&&(0,h.jsx)("div",{className:"notification error",style:{position:"relative",marginBottom:"1rem"},children:"\u26a0\ufe0f Modo offline - Dados podem estar desatualizados"}),(0,h.jsxs)("div",{className:"date-navigation",children:[(0,h.jsx)("button",{className:"nav-button",onClick:()=>w(-1),disabled:_,children:"\u2039"}),(0,h.jsxs)("div",{className:"current-date",children:[(0,h.jsx)("h2",{children:(R=e,R.toLocaleDateString("pt-BR",{weekday:"long",year:"numeric",month:"long",day:"numeric"}))}),(0,h.jsx)("input",{type:"date",value:S(e),onChange:e=>t(new Date(e.target.value+"T00:00:00")),style:{padding:"0.5rem",border:"2px solid #ddd",borderRadius:"8px",fontSize:"1rem"}})]}),(0,h.jsx)("button",{className:"nav-button",onClick:()=>w(1),disabled:_,children:"\u203a"})]}),_&&(0,h.jsxs)("div",{className:"loading",children:[(0,h.jsx)("div",{className:"spinner"}),"Carregando agendamentos..."]}),E&&(0,h.jsxs)("div",{className:"notification error",style:{position:"relative",marginBottom:"1rem"},children:[(0,h.jsxs)("span",{children:["\u26a0\ufe0f ",E]}),(0,h.jsx)("button",{onClick:()=>N(null),children:"\xd7"})]}),y&&(0,h.jsx)("div",{className:"notification success",style:{position:"relative",marginBottom:"1rem"},children:(0,h.jsxs)("span",{children:["\u2705 ",y]})}),(0,h.jsx)("div",{className:"calendar-container",children:(0,h.jsx)("div",{className:"time-slots",children:T.map(((e,t)=>(0,h.jsxs)("div",{className:"time-slot ".concat(e.available?"available":"occupied"),onClick:()=>(e=>{e.available&&(j(e),v(!0))})(e),children:[(0,h.jsxs)("div",{className:"time-range",children:[e.start_time," - ",e.end_time]}),e.available?(0,h.jsx)("div",{className:"slot-status",children:"Dispon\xedvel"}):(0,h.jsxs)("div",{className:"appointment-info",children:[(0,h.jsx)("div",{className:"appointment-title",children:e.appointment.title}),(0,h.jsx)("div",{className:"appointment-name",children:e.appointment.name})]})]},t)))})}),a.length>0&&(0,h.jsxs)("div",{style:{marginTop:"2rem"},children:[(0,h.jsxs)("h3",{style:{marginBottom:"1rem",color:"#2a5298"},children:["Agendamentos do Dia (",a.length,")"]}),(0,h.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"1rem"},children:a.map((e=>(0,h.jsxs)("div",{style:{background:"white",padding:"1rem",borderRadius:"8px",border:"1px solid #ddd",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[(0,h.jsx)("h4",{style:{margin:"0 0 0.5rem 0",color:"#2a5298"},children:e.title}),(0,h.jsxs)("p",{style:{margin:"0.25rem 0",fontSize:"0.9rem"},children:[(0,h.jsx)("strong",{children:"Hor\xe1rio:"})," ",e.start_time," - ",e.end_time]}),(0,h.jsxs)("p",{style:{margin:"0.25rem 0",fontSize:"0.9rem"},children:[(0,h.jsx)("strong",{children:"Respons\xe1vel:"})," ",e.name]}),e.participants&&(0,h.jsxs)("p",{style:{margin:"0.25rem 0",fontSize:"0.9rem"},children:[(0,h.jsx)("strong",{children:"Participantes:"})," ",e.participants]}),e.description&&(0,h.jsxs)("p",{style:{margin:"0.25rem 0",fontSize:"0.9rem"},children:[(0,h.jsx)("strong",{children:"Descri\xe7\xe3o:"})," ",e.description]})]},e.id)))})]})]}),(0,h.jsx)(f,{isOpen:d,onClose:()=>{v(!1),j(null)},selectedSlot:x,onConfirm:async t=>{try{const a={name:t.name,title:t.title,participants:t.participants,date:S(e),start_time:t.start_time,end_time:t.end_time};s("Criando agendamento:",a),await A("".concat(o.API_BASE_URL,"/api/appointments"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),b("Agendamento criado com sucesso!"),setTimeout((()=>b(null)),3e3),v(!1),j(null),await O(),localStorage.removeItem("".concat(p,"_").concat(S(e)))}catch(E){l("Erro ao criar agendamento:",E),C("Erro ao criar agendamento. Tente novamente.")}}})]});var R};r.createRoot(document.getElementById("root")).render((0,h.jsx)(n.StrictMode,{children:(0,h.jsx)(v,{})}))}},t={};function a(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,a),i.exports}a.m=e,(()=>{var e=[];a.O=(t,n,r,i)=>{if(!n){var o=1/0;for(d=0;d<e.length;d++){n=e[d][0],r=e[d][1],i=e[d][2];for(var s=!0,l=0;l<n.length;l++)(!1&i||o>=i)&&Object.keys(a.O).every((e=>a.O[e](n[l])))?n.splice(l--,1):(s=!1,i<o&&(o=i));if(s){e.splice(d--,1);var c=r();void 0!==c&&(t=c)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[n,r,i]}})(),a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={792:0};a.O.j=t=>0===e[t];var t=(t,n)=>{var r,i,o=n[0],s=n[1],l=n[2],c=0;if(o.some((t=>0!==e[t]))){for(r in s)a.o(s,r)&&(a.m[r]=s[r]);if(l)var d=l(a)}for(t&&t(n);c<o.length;c++)i=o[c],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(d)},n=self.webpackChunkfrontend=self.webpackChunkfrontend||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var n=a.O(void 0,[103],(()=>a(625)));n=a.O(n)})();