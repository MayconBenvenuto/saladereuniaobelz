(()=>{"use strict";var e={150:(e,a,t)=>{var i=t(950),s=t(352),n=t(555),r=t(414);const o=()=>{const[e,a]=(0,i.useState)(new Date),[t,s]=(0,i.useState)(null),[o,l]=(0,i.useState)(!1),[c,d]=(0,i.useState)(null),[m,u]=(0,i.useState)(!1),[p,h]=(0,i.useState)(null),[x,j]=(0,i.useState)(null),[v,b]=(0,i.useState)({name:"",title:"",participants:"",start_time:"",end_time:""}),g=e=>e.toISOString().split("T")[0],f=e=>e.slice(0,5),N=e=>{h(e),setTimeout((()=>h(null)),5e3)},y=(0,i.useCallback)((async()=>{u(!0),h(null);try{const a=g(e),t=await fetch("".concat("","/api/availability/").concat(a));if(!t.ok)throw new Error("HTTP ".concat(t.status,": ").concat(t.statusText));const i=await t.json();s(i)}catch(p){console.error("Error loading availability:",p),N("Erro ao carregar disponibilidade. Verifique sua conex\xe3o e tente novamente.")}finally{u(!1)}}),[e]);(0,i.useEffect)((()=>{y()}),[y]);const w=(0,i.useCallback)((t=>{const i=new Date(e);i.setDate(e.getDate()+t),a(i)}),[e]),C=(0,i.useCallback)((e=>{e.available&&(d(e),b((0,n.A)((0,n.A)({},v),{},{start_time:e.start_time.slice(0,5),end_time:e.end_time.slice(0,5)})),l(!0))}),[v]),k=(0,i.useCallback)((async a=>{if(a.preventDefault(),v.name.trim()?v.title.trim()?v.start_time?v.end_time?!(v.start_time>=v.end_time)||(N("Hor\xe1rio de fim deve ser posterior ao hor\xe1rio de in\xedcio"),0):(N("Hor\xe1rio de fim \xe9 obrigat\xf3rio"),0):(N("Hor\xe1rio de in\xedcio \xe9 obrigat\xf3rio"),0):(N("T\xedtulo da reuni\xe3o \xe9 obrigat\xf3rio"),0):(N("Nome \xe9 obrigat\xf3rio"),0)){u(!0),h(null);try{const a={name:v.name.trim(),date:g(e),start_time:v.start_time,end_time:v.end_time,title:v.title.trim(),description:v.participants.trim()||null,participants:v.participants.trim()||null},t=await fetch("".concat("","/api/appointments"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!t.ok){const e=await t.json();throw new Error(e.error||"HTTP ".concat(t.status,": ").concat(t.statusText))}j("Agendamento realizado com sucesso!"),setTimeout((()=>j(null)),3e3),l(!1),b({name:"",title:"",participants:"",start_time:"",end_time:""}),y()}catch(p){console.error("Error booking appointment:",p),N("Erro ao agendar: ".concat(p.message))}finally{u(!1)}}}),[v,e,y]);return(0,r.jsxs)("div",{className:"app",children:[p&&(0,r.jsxs)("div",{className:"notification error",children:[(0,r.jsxs)("span",{children:["\u274c ",p]}),(0,r.jsx)("button",{onClick:()=>h(null),children:"\xd7"})]}),x&&(0,r.jsxs)("div",{className:"notification success",children:[(0,r.jsxs)("span",{children:["\u2705 ",x]}),(0,r.jsx)("button",{onClick:()=>j(null),children:"\xd7"})]}),(0,r.jsx)("header",{className:"header",children:(0,r.jsxs)("div",{className:"header-content",children:[(0,r.jsxs)("div",{className:"logo-container",children:[(0,r.jsx)("img",{src:"https://images.unsplash.com/photo-1701500096456-28186c4a306d?crop=entropy&cs=srgb&fm=jpg&ixid=M3w3NTY2NzB8MHwxfHNlYXJjaHwzfHxpbnN1cmFuY2UlMjBsb2dvfGVufDB8fHx8MTc1MjUxNTgwM3ww&ixlib=rb-4.1.0&q=85",alt:"Belz Corretora de Seguros",className:"logo"}),(0,r.jsx)("h1",{children:"Belz Corretora de Seguros"})]}),(0,r.jsxs)("div",{className:"room-image-container",children:[(0,r.jsx)("img",{src:"https://images.unsplash.com/photo-1517502884422-41eaead166d4?crop=entropy&cs=srgb&fm=jpg&ixid=M3w3NDk1Nzh8MHwxfHNlYXJjaHwyfHxjb25mZXJlbmNlJTIwcm9vbXxlbnwwfHx8fDE3NTI1MTU3NjZ8MA&ixlib=rb-4.1.0&q=85",alt:"Sala de Reuni\xe3o",className:"room-image"}),(0,r.jsxs)("div",{className:"room-overlay",children:[(0,r.jsx)("h2",{children:"Sala de Reuni\xe3o"}),(0,r.jsx)("p",{children:"Agendamento de Reuni\xf5es"})]})]})]})}),(0,r.jsxs)("main",{className:"main-content",children:[(0,r.jsxs)("div",{className:"date-navigation",children:[(0,r.jsx)("button",{className:"nav-button",onClick:()=>w(-1),disabled:m,children:"\u2190"}),(0,r.jsx)("h2",{className:"current-date",children:(A=e,A.toLocaleDateString("pt-BR",{weekday:"long",year:"numeric",month:"long",day:"numeric"}))}),(0,r.jsx)("button",{className:"nav-button",onClick:()=>w(1),disabled:m,children:"\u2192"})]}),(0,r.jsx)("div",{className:"calendar-container",children:m?(0,r.jsxs)("div",{className:"loading",children:[(0,r.jsx)("div",{className:"spinner"}),"Carregando..."]}):(()=>{let e=[];return t&&Array.isArray(t.slots)?e=t.slots:Array.isArray(t)&&(e=t),Array.isArray(e)&&e.length>0?(0,r.jsx)("div",{className:"time-slots",children:e.map(((e,a)=>((e,a)=>{const t=e.available,i=t?"time-slot available":"time-slot occupied";return(0,r.jsxs)("div",{className:i,onClick:()=>C(e),title:t?"Clique para agendar":"".concat(e.appointment.title," - ").concat(e.appointment.name),children:[(0,r.jsxs)("div",{className:"time-range",children:[f(e.start_time)," - ",f(e.end_time)]}),!t&&(0,r.jsxs)("div",{className:"appointment-info",children:[(0,r.jsx)("div",{className:"appointment-title",children:e.appointment.title}),(0,r.jsx)("div",{className:"appointment-name",children:e.appointment.name})]})]},a)})(e,a)))}):(0,r.jsxs)("div",{className:"no-data",children:[(0,r.jsx)("p",{children:"Nenhum hor\xe1rio dispon\xedvel para este dia"}),(0,r.jsx)("p",{children:"Por favor, verifique se o banco de dados est\xe1 configurado corretamente."})]})})()}),(0,r.jsx)("div",{className:"floating-action-button-container",children:(0,r.jsxs)("button",{className:"floating-action-button",onClick:()=>l(!0),disabled:m,children:[(0,r.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,r.jsx)("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),(0,r.jsx)("line",{x1:"8",y1:"12",x2:"16",y2:"12"})]}),"Agendar Reuni\xe3o"]})})]}),o&&(0,r.jsx)("div",{className:"modal-overlay",children:(0,r.jsxs)("div",{className:"modal-content",children:[(0,r.jsxs)("div",{className:"modal-header",children:[(0,r.jsx)("h3",{children:"Agendar Reuni\xe3o"}),(0,r.jsx)("button",{className:"close-button",onClick:()=>l(!1),disabled:m,children:"\xd7"})]}),(0,r.jsxs)("form",{onSubmit:k,className:"booking-form",children:[(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{children:"Nome e Sobrenome *"}),(0,r.jsx)("input",{type:"text",value:v.name,onChange:e=>b((0,n.A)((0,n.A)({},v),{},{name:e.target.value})),placeholder:"Digite seu nome completo",required:!0,disabled:m})]}),(0,r.jsx)("div",{className:"form-row",children:(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{children:"Data"}),(0,r.jsx)("input",{type:"date",value:g(e),onChange:e=>{a(new Date(e.target.value+"T00:00:00"))},disabled:m})]})}),(0,r.jsxs)("div",{className:"form-row",children:[(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{children:"Hor\xe1rio de In\xedcio *"}),(0,r.jsx)("input",{type:"time",value:v.start_time,onChange:e=>b((0,n.A)((0,n.A)({},v),{},{start_time:e.target.value})),required:!0,disabled:m})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{children:"Hor\xe1rio de Fim *"}),(0,r.jsx)("input",{type:"time",value:v.end_time,onChange:e=>b((0,n.A)((0,n.A)({},v),{},{end_time:e.target.value})),required:!0,disabled:m})]})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{children:"T\xedtulo da Reuni\xe3o *"}),(0,r.jsx)("input",{type:"text",value:v.title,onChange:e=>b((0,n.A)((0,n.A)({},v),{},{title:e.target.value})),placeholder:"Ex: Reuni\xe3o de Vendas",required:!0,disabled:m})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{children:"Participantes (opcional)"}),(0,r.jsx)("textarea",{value:v.participants,onChange:e=>b((0,n.A)((0,n.A)({},v),{},{participants:e.target.value})),placeholder:"Liste os participantes da reuni\xe3o",rows:"3",disabled:m})]}),(0,r.jsxs)("div",{className:"form-actions",children:[(0,r.jsx)("button",{type:"button",className:"cancel-button",onClick:()=>l(!1),disabled:m,children:"Cancelar"}),(0,r.jsx)("button",{type:"submit",className:"submit-button",disabled:m,children:m?"Agendando...":"Confirmar Agendamento"})]})]})]})})]});var A};s.createRoot(document.getElementById("root")).render((0,r.jsx)(i.StrictMode,{children:(0,r.jsx)(o,{})}))}},a={};function t(i){var s=a[i];if(void 0!==s)return s.exports;var n=a[i]={exports:{}};return e[i](n,n.exports,t),n.exports}t.m=e,(()=>{var e=[];t.O=(a,i,s,n)=>{if(!i){var r=1/0;for(d=0;d<e.length;d++){i=e[d][0],s=e[d][1],n=e[d][2];for(var o=!0,l=0;l<i.length;l++)(!1&n||r>=n)&&Object.keys(t.O).every((e=>t.O[e](i[l])))?i.splice(l--,1):(o=!1,n<r&&(r=n));if(o){e.splice(d--,1);var c=s();void 0!==c&&(a=c)}}return a}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[i,s,n]}})(),t.d=(e,a)=>{for(var i in a)t.o(a,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:a[i]})},t.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),(()=>{var e={792:0};t.O.j=a=>0===e[a];var a=(a,i)=>{var s,n,r=i[0],o=i[1],l=i[2],c=0;if(r.some((a=>0!==e[a]))){for(s in o)t.o(o,s)&&(t.m[s]=o[s]);if(l)var d=l(t)}for(a&&a(i);c<r.length;c++)n=r[c],t.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return t.O(d)},i=self.webpackChunkfrontend=self.webpackChunkfrontend||[];i.forEach(a.bind(null,0)),i.push=a.bind(null,i.push.bind(i))})();var i=t.O(void 0,[103],(()=>t(150)));i=t.O(i)})();